cd /home/pd2669/data-engineering-zoomcamp-gcp/02-workflow-orchestration
docker-compose up


gcloud auth login
gcloud compute instances describe de-zoomcamp


SELECT * FROM `big-bliss-411815.demo_dataset.your_table2` LIMIT 1000
INSERT `big-bliss-411815.demo_dataset.your_table2` (column1)
VALUES ('Your exemplary value 1'),
       ('Your exemplary value 2'),
       ('Your exemplary value 3')
;


 gcloud auth list
                      Credentialed Accounts
ACTIVE  ACCOUNT
        103043800958-compute@developer.gserviceaccount.com
*       pd2669@pjwstk.edu.pl
        terraform-runner@big-bliss-411815.iam.gserviceaccount.com

To set the active account, run:
    $ gcloud config set account `ACCOUNT`


chestration$ gcloud storage ls
gs://big-bliss-411815-terra-bucket/
gs://mage-zoomcamp-pd2669/


(pd2669) pd2669@de-zoomcamp:~/data-engineering-zoomcamp-gcp/02-workflow-orchestration$ gcloud config set account pd2669@pjwstk.edu.pl
Updated property [core/account].
(pd2669) pd2669@de-zoomcamp:~/data-engineering-zoomcamp-gcp/02-workflow-orchestration$ gcloud storage ls
gs://big-bliss-411815-terra-bucket/
gs://mage-zoomcamp-pd2669/

git clone https://github.com/mage-ai/mage-ai-terraform-templates.git


### terraform
cd /home/pd2669/data-engineering-zoomcamp-gcp/02-workflow-orchestration/mage-terraform/mage-ai-terraform-templates/gcp
terraform init
terraform plan
terraform apply
pass: postgress
terraform destroy


gcloud sql instances delete mage-data-prep-db-instance
All of the instance data will be lost when the instance is deleted.

Do you want to continue (Y/n)?  Y

Deleting Cloud SQL instance...done.                                                                                        
Deleted [https://sqladmin.googleapis.com/sql/v1beta4/projects/big-bliss-411815/instances/mage-data-prep-db-instance].


gcloud run services list --region=europe-central2
   SERVICE         REGION           URL                                             LAST DEPLOYED BY                                        LAST DEPLOYED AT
âœ”  mage-data-prep  europe-central2  https://mage-data-prep-gdriq56qka-lm.a.run.app  mage-zoomcamp@big-bliss-411815.iam.gserviceaccount.com  2024-02-03T21:06:06.817971Z


gcloud sql connect mage-data-prep-db-instance --user=postgres --quiet


### HW 2
docker exec -it magic-zoomcamp-postgres psql -U postgres
\l
\dt
\dn

-- Create a test schema
CREATE SCHEMA test;
-- Switch to the test schema
SET search_path TO test;
-- Create a test table
CREATE TABLE test_table (
    id serial PRIMARY KEY,
    name VARCHAR(100),
    age INT
);
-- Insert some test data
INSERT INTO test_table (name, age) VALUES ('John', 25), ('Jane', 30);

postgres=# SELECT * FROM test.test_table;
 id | name | age 
----+------+-----
  1 | John |  25
  2 | Jane |  30
(2 rows)

postgres=# \dt


